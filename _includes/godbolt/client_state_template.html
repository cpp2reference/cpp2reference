{"sessions":[{"id":1,"language":"cpp2_cppfront","source":"","conformanceview":false,"compilers":[{"_internalid":1,"id":"cppfront_trunk","options":"","filters":{"binary":false,"binaryObject":false,"commentOnly":true,"demangle":true,"directives":true,"execute":false,"intel":true,"labels":true,"libraryCode":true,"trim":false,"debugCalls":false},"libs":[],"specialoutputs":[],"tools":[]}],"executors":[],"filename":"main.cpp2"}],"trees":[{"id":1,"cmakeArgs":"-DJEGP_CXX2_FLAGS=\"-include-std\" -DCMAKE_CXX_FLAGS=\"-std=c++20 -fexperimental-library -pedantic-errors -Wall -Wextra -Wconversion -Werror=unused-result -Werror=unused-value\" -GNinja -Wno-dev","customOutputFilename":"main","isCMakeProject":true,"compilerLanguageId":"c++","files":[{"fileId":1,"isIncluded":true,"isOpen":true,"isMainSource":false,"filename":"main.cpp2","content":"","editorId":1,"langId":""},{"fileId":2,"isIncluded":true,"isOpen":false,"isMainSource":true,"filename":"CMakeLists.txt","content":"cmake_minimum_required(VERSION ${CMAKE_VERSION})\nproject(test LANGUAGES CXX)\n\ninclude(\"CompilerExplorerSetup.cmake\")\n\nadd_executable(main)\njegp_cpp2_target_sources(main PRIVATE \"main.cpp2\")\ntarget_include_directories(\n  main\n    PRIVATE \"${CMAKE_CURRENT_SOURCE_DIR}\"\n )","editorId":-1,"langId":"cmake"},{"fileId":3,"isIncluded":true,"isOpen":false,"isMainSource":false,"filename":"JEGPCpp2.cmake","content":"function(_jegp_cpp2_generate cpp2_src)\n  string(REGEX REPLACE \"2$\" \"\" cpp1_src \"${cpp2_src}\")\n\n  cmake_path(GET cpp1_src PARENT_PATH cpp1_src_parent_path)\n  cmake_path(GET cpp1_src FILENAME cpp1_src_filename)\n  cmake_path(RELATIVE_PATH cpp1_src_parent_path BASE_DIRECTORY \"${CMAKE_CURRENT_BINARY_DIR}\")\n  string(PREPEND cpp1_src_parent_path \"${CMAKE_CURRENT_BINARY_DIR}/${JEGP_CPPFRONT_BUILD_DIR}/\")\n  file(MAKE_DIRECTORY \"${cpp1_src_parent_path}\")\n  set(cpp1_src \"${cpp1_src_parent_path}/${cpp1_src_filename}\")\n  cmake_path(NORMAL_PATH cpp1_src)\n\n  add_custom_command(\n    OUTPUT \"${cpp1_src}\" COMMAND \"${JEGP_CXX2_COMPILER}\" \"${JEGP_CXX2_FLAGS}\" \"${cpp2_src}\" -o \"${cpp1_src}\"\n    DEPENDS \"${JEGP_CXX2_COMPILER}\" \"${cpp2_src}\" WORKING_DIRECTORY \"${CMAKE_CURRENT_SOURCE_DIR}\")\n  set_source_files_properties(\"${cpp1_src}\" PROPERTIES INCLUDE_DIRECTORIES \"${JEGP_CPPFRONT_INCLUDE_DIRECTORIES}\")\n\n  return(PROPAGATE cpp1_src)\nendfunction()\n\nfunction(jegp_cpp2_target name)\n  get_target_property(cpp2_sources \"${name}\" SOURCES)\n  list(FILTER cpp2_sources INCLUDE REGEX \"\\\\.(cpp|h)2$\")\n\n  foreach(cpp2_src IN LISTS cpp2_sources)\n    _jegp_cpp2_generate(\"${cpp2_src}\")\n    target_sources(\"${name}\" PRIVATE \"${cpp1_src}\")\n  endforeach()\nendfunction()\n\nfunction(jegp_cpp2_target_sources)\n  set(args)\n  foreach(i RANGE 0 ${ARGC})\n    if(NOT (${ARGV${i}} MATCHES \"\\\\.(cpp|h)2$\"))\n      list(APPEND args \"\\${ARGV${i}}\")\n      continue()\n    endif()\n\n    _jegp_cpp2_generate(\"${ARGV${i}}\")\n    set(ARGV${i} \"${cpp1_src}\")\n    list(APPEND args \"\\${ARGV${i}}\")\n  endforeach()\n  cmake_language(EVAL CODE \"target_sources(${args})\")\nendfunction()\n","editorId":-1,"langId":"cmake"},{"fileId":4,"isIncluded":true,"isOpen":false,"isMainSource":false,"filename":"cpp2util.h","content":"#include \"https://raw.githubusercontent.com/hsutter/cppfront/main/include/cpp2regex.h\"\n#include \"https://raw.githubusercontent.com/hsutter/cppfront/main/include/cpp2util.h\"","editorId":-1,"langId":"c"},{"fileId":5,"isIncluded":true,"isOpen":false,"isMainSource":false,"filename":"CompilerExplorerSetup.cmake","content":"# https://libcxx.llvm.org/Modules.html#using-in-external-projects\nif(CMAKE_VERSION VERSION_LESS \"3.27.0\")\n  set(CMAKE_EXPERIMENTAL_CXX_MODULE_CMAKE_API \"2182bf5c-ef0d-489a-91da-49dbc3090d2a\")\nelse()\n  set(CMAKE_EXPERIMENTAL_CXX_MODULE_CMAKE_API \"aa1f7df0-828a-4fcd-9afc-2dc80491aca7\")\nendif()\nset(CMAKE_EXPERIMENTAL_CXX_MODULE_DYNDEP 1)\n\n# https://github.com/huangqinjin/cxxmodules/blob/master/CMakeLists.txt\nif(CMAKE_CXX_COMPILER_ID STREQUAL \"GNU\")\n    string(CONCAT CMAKE_EXPERIMENTAL_CXX_SCANDEP_SOURCE\n      \"/opt/compiler-explorer/clang-trunk/bin/clang-scan-deps\"\n      \" -format=p1689\"\n      \" --\"\n      \" <CMAKE_CXX_COMPILER> <DEFINES> <INCLUDES> <FLAGS>\"\n      \" -isystem /opt/compiler-explorer/gcc-snapshot/bin/../lib/gcc/x86_64-linux-gnu/${CMAKE_CXX_COMPILER_VERSION}/include\"\n      \" -x c++ <SOURCE> -c -o <OBJECT>\"\n      \" -MT <DYNDEP_FILE>\"\n      \" -MD -MF <DEP_FILE>\"\n      \" > <DYNDEP_FILE>\")\n    set(CMAKE_EXPERIMENTAL_CXX_MODULE_MAP_FORMAT \"gcc\")\n    set(CMAKE_EXPERIMENTAL_CXX_MODULE_MAP_FLAG \"-fmodules-ts -Mno-modules -fmodule-mapper=<MODULE_MAP_FILE> -x c++\")\nendif()\n\nif(CMAKE_CXX_COMPILER_ID STREQUAL \"Clang\")\n  add_compile_options(-stdlib=libc++)\n  add_link_options(-stdlib=libc++ -lc++abi)\nendif()\n\nset(JEGP_CXX2_COMPILER \"/opt/compiler-explorer/cppfront-trunk/cppfront\")\nset(JEGP_CPPFRONT_INCLUDE_DIRECTORIES \"${CMAKE_CURRENT_SOURCE_DIR}\")\n\nadd_library(cppfront::cpp2util INTERFACE IMPORTED)\ntarget_include_directories(cppfront::cpp2util INTERFACE \"${JEGP_CPPFRONT_INCLUDE_DIRECTORIES}\")\n\nadd_executable(cppfront::cppfront IMPORTED)\nset_target_properties(cppfront::cppfront PROPERTIES IMPORTED_LOCATION \"${JEGP_CXX2_COMPILER}\")\n\ninclude(\"JEGPCpp2.cmake\")\n","editorId":-1,"langId":"c++"}],"newFileId":6,"compilers":[{"_internalid":2,"id":"clang_trunk","options":"# Use the CMake project.","filters":{"binary":false,"binaryObject":false,"commentOnly":true,"demangle":true,"directives":true,"execute":true,"intel":true,"labels":true,"libraryCode":true,"trim":false,"debugCalls":false},"libs":[],"specialoutputs":["compilerOutput"],"tools":[]}],"executors":[{"arguments":"","compiler":{"id":"clang_trunk","libs":[],"options":""},"stdin":""}]}]}